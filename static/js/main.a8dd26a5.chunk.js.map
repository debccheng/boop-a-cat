{"version":3,"sources":["helpers/getRandomInt.tsx","helpers/getPositions.tsx","helpers/useViewport.tsx","assets/cat.png","assets/cat_petted.png","assets/box.png","components/Cell.tsx","components/Timer.tsx","components/Game.tsx","App.tsx","reportWebVitals.ts","index.tsx"],"names":["getRandomInt","min","max","Math","floor","random","getPositions","totalPositions","positions","popupMax","length","position","includes","push","useViewport","useState","WidthMoreThanHeight","setWidthMoreThanHeight","useEffect","handleResize","window","innerWidth","innerHeight","addEventListener","removeEventListener","Cell","popup","id","clicked","escaped","handleClick","timesup","className","src","clickedCat","cat","alt","onClick","undefined","box","style","Timer","timeLimit","handleTimesUp","counter","setCounter","interval","setInterval","state","clearInterval","initialState","popupPositions","score","missed","catsEscaped","catsTouched","reducer","action","type","cats","document","getElementsByClassName","touchedCats","touched","i","getAttribute","replace","parseInt","j","getElementById","animation","Error","Game","resize","useReducer","dispatch","gameFinished","setGameFinished","e","catID","target","catTouched","top","getComputedStyle","getPropertyValue","setAttribute","touchedNum","useCallback","elements","timer","setTimeout","clearTimeout","width","height","map","App","lang","navigator","language","reportWebVitals","onPerfEntry","Function","then","getCLS","getFID","getFCP","getLCP","getTTFB","ReactDOM","render","StrictMode"],"mappings":"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","file":"static/js/main.a8dd26a5.chunk.js","sourcesContent":["const getRandomInt = (min: number, max: number): number => Math.floor(Math.random() * (max - min + 1)) + min;\n\nexport default getRandomInt;","\nimport getRandomInt from './getRandomInt';\n\nconst getPositions = (totalPositions: Array<number>): Array<number> => {\n  const positions: Array<number> = [];\n  const popupMax: number = getRandomInt(1, Math.floor(totalPositions.length/2));\n  while (positions.length < popupMax) {\n    const position: number = getRandomInt(1, 9)\n    if (positions.includes(position)) {\n      continue;\n    } else {\n      positions.push(position);\n    }\n  }\n  return positions;\n};\n\nexport default getPositions;\n","import {useState, useEffect} from 'react';\n\nconst useViewport = (): boolean => {\n  const [WidthMoreThanHeight, setWidthMoreThanHeight] = useState<boolean>(true);\n  useEffect(() => {\n    const handleResize = () => {\n      if (window.innerWidth >= window.innerHeight) {\n        setWidthMoreThanHeight(true);\n      } else {\n        setWidthMoreThanHeight(false);\n      }\n    }\n    window.addEventListener(\"resize\", handleResize);\n    handleResize();\n\n    return () => window.removeEventListener(\"resize\", handleResize);\n  }, []);\n\n  return WidthMoreThanHeight;\n}\n\nexport default useViewport;\n","export default __webpack_public_path__ + \"static/media/cat.e59a3b8a.png\";","export default __webpack_public_path__ + \"static/media/cat_petted.ed04e662.png\";","export default __webpack_public_path__ + \"static/media/box.fc12d1a3.png\";","import React from 'react';\nimport cat from '../assets/cat.png';\nimport clickedCat from '../assets/cat_petted.png';\nimport box from '../assets/box.png'\nimport { CellProps } from '../types/types';\n\nconst Cell: React.FC<CellProps> = ({ popup, id, clicked, escaped, handleClick, timesup }) => {\n  const animateBox = {\n    \"animation\": \"shake 0.4s linear both\"\n  };\n\n  return (\n    <>\n      <div className=\"cell\" id={`cell-${id}`}>\n        <div className=\"media\" >\n          {popup\n            ?\n            <>\n              <img\n                id={`cat-${id}`}\n                src={clicked.includes(id) ? clickedCat : cat}\n                alt=\"cat\"\n                className={\n                  `cat\n                  ${clicked.includes(id) ? 'catOut' : null}\n                  ${escaped.includes(id) && !timesup ? 'catEscape' : null}\n                `}\n                onClick={!clicked.includes(id) && !timesup ? handleClick : undefined}\n              />\n            </>\n            :\n            null\n          }\n          <img\n            id={`box-${id}`}\n            src={box}\n            alt=\"box\"\n            className=\"box\"\n            style={popup ? animateBox : undefined}\n          />\n        </div>\n      </div>\n    </>\n  );\n}\n\nexport default Cell;\n","import React, { useState, useEffect } from 'react'\nimport { TimerProps } from '../types/types';\n\nconst Timer: React.FC<TimerProps> = ({ timeLimit, handleTimesUp}) => {\n  const [counter, setCounter] = useState<number>(timeLimit);\n\n  useEffect(() => {\n    const countdown = () => {\n      if (counter >0) {\n        setCounter(state => state -1)\n      } else {\n        setCounter(0)\n        clearInterval(interval)\n        handleTimesUp();\n      }\n    }\n    const interval = setInterval(countdown, 1000);\n    return () => {\n      clearInterval(interval);\n    }\n  }, [counter, handleTimesUp, timeLimit])\n\n  return (\n    <h2 className=\"countdown\">\n      Time: {counter}\n    </h2>\n  );\n}\n\nexport default Timer;\n","import React, { useEffect, useReducer, useState, useCallback } from 'react';\nimport { InitState, Actions } from '../types/types';\nimport getPositions from '../helpers/getPositions';\nimport useViewport from '../helpers/useViewport';\nimport Cell from './Cell';\nimport Timer from './Timer';\n\n\nconst Game = () => {\n  const resize = useViewport();\n  const [state, dispatch] = useReducer<React.Reducer<InitState, Actions>>(reducer, initialState);\n  const [gameFinished, setGameFinished] = useState<boolean>(false);\n\n  const handleClick = (e: any) => {\n    dispatch({ type: 'CAT_TOUCHED' });\n    const catID = e.target.id;\n    const catTouched: HTMLElement = document.getElementById(catID)!;\n    const top: string = window.getComputedStyle(catTouched).getPropertyValue('top');\n    catTouched.setAttribute(\"style\", `top: ${top}`);\n    const touchedNum: number = parseInt(catID.replace(/\\D/g, ''));\n    if (!state.catsTouched.includes(touchedNum)) {\n      state.catsTouched.push(touchedNum);\n    }\n  }\n\n  const handleTimesUp = useCallback(() => {\n    dispatch({ type: 'CLEANUP'});\n    setGameFinished(true);\n    dispatch({ type: 'GAME_FINISHED'});\n    const style = `\n      background-color: gold;\n      border-radius: 100rem;\n    `;\n    const elements = document.getElementsByClassName('media');\n    for (let i = 0; i<elements.length; i+=1) {\n      elements[i].setAttribute(\"style\", style);\n    }\n  }, []);\n\n  const handleRestart = () => {\n    dispatch({ type: 'RESTART'});\n    setGameFinished(false);\n    const style = `\n    background-color: inherit;\n    border-radius: 0;\n  `;\n    const elements = document.getElementsByClassName('media');\n    for (let i = 0; i<elements.length; i+=1) {\n      elements[i].setAttribute(\"style\", style);\n    }\n  }\n\n  // Game Loop\n  useEffect(() => {\n    const timer = setTimeout(() => {\n      setTimeout(() => {\n        dispatch({ type: 'CAT_ESCAPED' })\n      }, 2500);\n      dispatch({ type: 'CLEANUP' });\n      dispatch({ type: 'NEXT' });\n    }, 3000);\n\n    if (gameFinished) {\n      clearTimeout(timer);\n    }\n\n    return () => {\n      clearTimeout(timer);\n    };\n  });\n\n  return (\n    <>\n      <div className=\"stats\">\n        <h2 className=\"score\"> Boop: {state.score}</h2>\n        {state.timeLimit ? <Timer handleTimesUp={handleTimesUp} timeLimit={state.timeLimit}/> : null}\n        {gameFinished && <h2 className=\"timesup\">Time's up!</h2>}\n        {gameFinished && <button onClick={handleRestart} className=\"restartButton\">restart</button>}\n      </div>\n      <div\n        className=\"grid\"\n        style={resize ? { width: '40vw', height: '40vw' } : { width: '40vh', height: '40vh' }}\n      >\n        {totalPositions.map((position) =>\n          <Cell\n            key={position}\n            id={position}\n            popup={state.popupPositions.includes(position)}\n            clicked={state.catsTouched}\n            escaped={state.catsEscaped}\n            handleClick={handleClick}\n            timesup={gameFinished}\n          />\n        )}\n      </div>\n    </>\n  );\n}\n\nconst totalPositions: Array<number> = [1, 2, 3, 4, 5, 6, 7, 8, 9];\n\nconst initialState: InitState = {\n  popupPositions: [],\n  score: 0,\n  missed: 0,\n  timeLimit: 60,\n  catsEscaped: [],\n  catsTouched: [],\n};\n\nconst reducer: React.Reducer<InitState, Actions> = (state, action) => {\n  switch (action.type) {\n    case 'CAT_TOUCHED':\n      return {\n        ...state,\n        score: state.score + 1,\n      };\n\n    case 'CAT_ESCAPED':\n      const cats: HTMLCollection = document.getElementsByClassName('cat')\n      const touchedCats: HTMLCollection = document.getElementsByClassName('catOut');\n      const touched: Array<number> = [];\n      const escaped: Array<number> = [];\n      for (let i = 0; i < touchedCats.length; i += 1) {\n        const id: string = touchedCats[i].getAttribute(\"id\")!.replace(/\\D/g, '');\n        touched.push(parseInt(id));\n      }\n      for (let j = 0; j < cats.length; j += 1) {\n        const id: number = parseInt(cats[j].getAttribute(\"id\")!.replace(/\\D/g, ''));\n        if (!touched.includes(id)) {\n          escaped.push(id);\n        }\n        document.getElementById(`box-${id}`)!.style.animation = '';\n      }\n      return {\n        ...state,\n        catsEscaped: escaped,\n      };\n\n    case 'CLEANUP':\n      return {\n        ...state,\n        popupPositions: [],\n        missed: state.missed + state.catsEscaped.length,\n        catsEscaped: [],\n        catsTouched: [],\n      }\n\n    case 'NEXT':\n      return {\n        ...state,\n        popupPositions: getPositions(totalPositions),\n      };\n\n    case 'GAME_FINISHED':\n      return {\n        ...state,\n        timeLimit: 0,\n        popupPositions: [1, 2, 3, 4, 5, 6, 7, 8, 9],\n        catsEscaped: [],\n        catsTouched: [],\n      }\n\n    case 'RESTART':\n      return initialState;\n\n    default:\n      throw new Error('Action undefined');\n  }\n}\n\nexport default Game;\n","import React from 'react';\nimport './App.css';\nimport Game from './components/Game';\n\nfunction App() {\n  const lang: string = window.navigator.language;\n\n  return (\n    <div className=\"App\">\n      {lang === \"zh-TW\" ? <h1 className=\"title\">來和小貓玩</h1>:<h1 className=\"title\">Boop a Cat!</h1> }\n      <Game />\n    </div>\n  );\n}\n\nexport default App;\n","import { ReportHandler } from 'web-vitals';\n\nconst reportWebVitals = (onPerfEntry?: ReportHandler) => {\n  if (onPerfEntry && onPerfEntry instanceof Function) {\n    import('web-vitals').then(({ getCLS, getFID, getFCP, getLCP, getTTFB }) => {\n      getCLS(onPerfEntry);\n      getFID(onPerfEntry);\n      getFCP(onPerfEntry);\n      getLCP(onPerfEntry);\n      getTTFB(onPerfEntry);\n    });\n  }\n};\n\nexport default reportWebVitals;\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport App from './App';\nimport reportWebVitals from './reportWebVitals';\n\nReactDOM.render(\n  <React.StrictMode>\n    <App />\n  </React.StrictMode>,\n  document.getElementById('root')\n);\n\n// If you want to start measuring performance in your app, pass a function\n// to log results (for example: reportWebVitals(console.log))\n// or send to an analytics endpoint. Learn more: https://bit.ly/CRA-vitals\nreportWebVitals();\n"],"sourceRoot":""}