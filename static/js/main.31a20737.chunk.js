(this["webpackJsonppet-a-cat"]=this["webpackJsonppet-a-cat"]||[]).push([[0],{10:function(e,t,c){},11:function(e,t,c){},13:function(e,t,c){"use strict";c.r(t);var n=c(1),a=c.n(n),s=c(5),i=c.n(s),r=(c(10),c(11),c(2)),o=c(3),u=function(e,t){return Math.floor(Math.random()*(t-e+1))+e},l=function(e){for(var t=[],c=u(1,Math.floor(e.length/2));t.length<c;){var n=u(1,9);t.includes(n)||t.push(n)}return t},d=function(){var e=Object(n.useState)(!0),t=Object(o.a)(e,2),c=t[0],a=t[1];return Object(n.useEffect)((function(){var e=function(){window.innerWidth>=window.innerHeight?a(!0):a(!1)};return window.addEventListener("resize",e),e(),function(){return window.removeEventListener("resize",e)}}),[]),c},p=c.p+"static/media/cat.e59a3b8a.png",m=c.p+"static/media/cat_petted.ed04e662.png",h=c.p+"static/media/box.fc12d1a3.png",b=c(0),j=function(e){var t=e.popup,c=e.id,n=e.clicked,a=e.escaped,s=e.handleClick,i=e.timesup;return Object(b.jsx)(b.Fragment,{children:Object(b.jsx)("div",{className:"cell",id:"cell-".concat(c),children:Object(b.jsxs)("div",{className:"media",children:[t?Object(b.jsx)(b.Fragment,{children:Object(b.jsx)("img",{id:"cat-".concat(c),src:n.includes(c)?m:p,alt:"cat",className:"cat\n                  ".concat(n.includes(c)?"catOut":null,"\n                  ").concat(a.includes(c)&&!i?"catEscape":null,"\n                "),onClick:n.includes(c)||i?void 0:s})}):null,Object(b.jsx)("img",{id:"box-".concat(c),src:h,alt:"box",className:"box",style:t?{animation:"shake 0.4s linear both"}:void 0})]})})})},g=function(e){var t=e.timeLimit,c=e.handleTimesUp,a=Object(n.useState)(t),s=Object(o.a)(a,2),i=s[0],r=s[1];return Object(n.useEffect)((function(){var e=setInterval((function(){i>0?r((function(e){return e-1})):(r(0),clearInterval(e),c())}),1e3);return function(){clearInterval(e)}}),[i,c,t]),Object(b.jsxs)("h2",{className:"countdown",children:["Time: ",i]})},O=[1,2,3,4,5,6,7,8,9],f={session:Date(),popupPositions:[],score:0,missed:0,timeLimit:40,catsEscaped:[],catsTouched:[]},v=function(e,t){switch(t.type){case"CAT_TOUCHED":return Object(r.a)(Object(r.a)({},e),{},{score:e.score+1});case"CAT_ESCAPED":for(var c=document.getElementsByClassName("cat"),n=document.getElementsByClassName("catOut"),a=[],s=[],i=0;i<n.length;i+=1){var o=n[i].getAttribute("id").replace(/\D/g,"");a.push(parseInt(o))}for(var u=0;u<c.length;u+=1){var d=parseInt(c[u].getAttribute("id").replace(/\D/g,""));a.includes(d)||s.push(d),document.getElementById("box-".concat(d)).style.animation=""}return Object(r.a)(Object(r.a)({},e),{},{catsEscaped:s});case"CLEANUP":return Object(r.a)(Object(r.a)({},e),{},{popupPositions:[],missed:e.missed+e.catsEscaped.length,catsEscaped:[],catsTouched:[]});case"NEXT":return Object(r.a)(Object(r.a)({},e),{},{popupPositions:l(O)});case"GAME_FINISHED":return Object(r.a)(Object(r.a)({},e),{},{timeLimit:0,popupPositions:[1,2,3,4,5,6,7,8,9],catsEscaped:[],catsTouched:[]});case"RESTART":return f;default:throw new Error("Action undefined")}},E=function(){var e=d(),t=Object(n.useReducer)(v,f),c=Object(o.a)(t,2),a=c[0],s=c[1],i=Object(n.useState)(!1),r=Object(o.a)(i,2),u=r[0],l=r[1];Object(n.useEffect)((function(){window.addEventListener("storage",(function(){E(JSON.parse(localStorage.getItem("boop-a-cat-high-score")))}))}));var p=Object(n.useState)(function(){var e=localStorage.getItem("boop-a-cat-high-score");return e?parseInt(e):0}()),m=Object(o.a)(p,2),h=m[0],E=m[1],T=Object(n.useCallback)((function(){s({type:"CLEANUP"}),l(!0),s({type:"GAME_FINISHED"}),a.score>h&&(E(a.score),localStorage.setItem("boop-a-cat-high-score",a.score.toString()));for(var e=document.getElementsByClassName("media"),t=0;t<e.length;t+=1)e[t].setAttribute("style","\n      background-color: gold;\n      border-radius: 100rem;\n    ")}),[h,a.score]),x=function(e){s({type:"CAT_TOUCHED"});var t=e.target.id,c=document.getElementById(t),n=window.getComputedStyle(c).getPropertyValue("top");c.setAttribute("style","top: ".concat(n));var i=parseInt(t.replace(/\D/g,""));a.catsTouched.includes(i)||a.catsTouched.push(i)};return Object(n.useEffect)((function(){var e=setTimeout((function(){setTimeout((function(){s({type:"CAT_ESCAPED"})}),2500),s({type:"CLEANUP"}),s({type:"NEXT"})}),3e3);return u&&clearTimeout(e),function(){clearTimeout(e)}})),Object(b.jsxs)(b.Fragment,{children:[Object(b.jsxs)("div",{className:"stats",children:[h>0?Object(b.jsxs)("h2",{className:"score",children:[" High Score: ",h]}):null,Object(b.jsxs)("h2",{className:"score",children:[" Boop: ",a.score]}),a.timeLimit?Object(b.jsx)(g,{handleTimesUp:T,timeLimit:a.timeLimit}):null,u&&Object(b.jsx)("h2",{className:"timesup",children:"Time's up!"}),u&&Object(b.jsx)("button",{onClick:function(){s({type:"RESTART"}),l(!1);for(var e=document.getElementsByClassName("media"),t=0;t<e.length;t+=1)e[t].setAttribute("style","\n    background-color: inherit;\n    border-radius: 0;\n  ")},className:"restartButton",children:"restart"})]}),Object(b.jsx)("div",{className:"grid",style:e?{width:"40vw",height:"40vw"}:{width:"40vh",height:"40vh"},children:O.map((function(e){return Object(b.jsx)(j,{id:e,popup:a.popupPositions.includes(e),clicked:a.catsTouched,escaped:a.catsEscaped,handleClick:x,timesup:u},e)}))})]})};var T=function(){var e=window.navigator.language;return Object(b.jsxs)("div",{className:"App",children:["zh-TW"===e?Object(b.jsx)("h1",{className:"title",children:"\u4f86\u548c\u5c0f\u8c93\u73a9"}):Object(b.jsx)("h1",{className:"title",children:"Boop a Cat!"}),Object(b.jsx)(E,{})]})},x=function(e){e&&e instanceof Function&&c.e(3).then(c.bind(null,14)).then((function(t){var c=t.getCLS,n=t.getFID,a=t.getFCP,s=t.getLCP,i=t.getTTFB;c(e),n(e),a(e),s(e),i(e)}))};i.a.render(Object(b.jsx)(a.a.StrictMode,{children:Object(b.jsx)(T,{})}),document.getElementById("root")),x()}},[[13,1,2]]]);
//# sourceMappingURL=main.31a20737.chunk.js.map