(this["webpackJsonppet-a-cat"]=this["webpackJsonppet-a-cat"]||[]).push([[0],{10:function(e,t,c){},11:function(e,t,c){},13:function(e,t,c){"use strict";c.r(t);var n=c(1),a=c.n(n),s=c(5),i=c.n(s),r=(c(10),c(11),c(2)),o=c(3),u=function(e,t){return Math.floor(Math.random()*(t-e+1))+e},l=function(e){for(var t=[],c=u(1,Math.floor(e.length/2));t.length<c;){var n=u(1,9);t.includes(n)||t.push(n)}return t},d=function(){var e=Object(n.useState)(!0),t=Object(o.a)(e,2),c=t[0],a=t[1];return Object(n.useEffect)((function(){var e=function(){window.innerWidth>=window.innerHeight?a(!0):a(!1)};return window.addEventListener("resize",e),e(),function(){return window.removeEventListener("resize",e)}}),[]),c},m=c.p+"static/media/cat.e59a3b8a.png",h=c.p+"static/media/cat_petted.ed04e662.png",p=c.p+"static/media/box.fc12d1a3.png",b=c(0),j=function(e){var t=e.popup,c=e.id,n=e.clicked,a=e.escaped,s=e.handleClick,i=e.timesup;return Object(b.jsx)(b.Fragment,{children:Object(b.jsx)("div",{className:"cell",id:"cell-".concat(c),children:Object(b.jsxs)("div",{className:"media",children:[t?Object(b.jsx)(b.Fragment,{children:Object(b.jsx)("img",{id:"cat-".concat(c),src:n.includes(c)?h:m,alt:"cat",className:"cat\n                  ".concat(n.includes(c)?"catOut":null,"\n                  ").concat(a.includes(c)&&!i?"catEscape":null,"\n                "),onClick:n.includes(c)||i?void 0:s})}):null,Object(b.jsx)("img",{id:"box-".concat(c),src:p,alt:"box",className:"box",style:t?{animation:"shake 0.4s linear both"}:void 0})]})})})},g=function(e){var t=e.timeLimit,c=e.handleTimesUp,a=Object(n.useState)(t),s=Object(o.a)(a,2),i=s[0],r=s[1];return Object(n.useEffect)((function(){var e=setInterval((function(){i>0?r((function(e){return e-1})):(r(0),clearInterval(e),c())}),1e3);return function(){clearInterval(e)}}),[i,c]),Object(b.jsxs)("h2",{className:"countdown",children:["Time: ",i]})},f=[1,2,3,4,5,6,7,8,9],O={session:Date(),popupPositions:[],score:0,missed:0,timeLimit:40,catsEscaped:[],catsTouched:[],gameFinished:!1},v=function(e,t){switch(t.type){case"CAT_TOUCHED":return Object(r.a)(Object(r.a)({},e),{},{score:e.score+1});case"CAT_ESCAPED":for(var c=document.getElementsByClassName("cat"),n=document.getElementsByClassName("catOut"),a=[],s=[],i=0;i<n.length;i+=1){var o=n[i].getAttribute("id").replace(/\D/g,"");a.push(parseInt(o))}for(var u=0;u<c.length;u+=1){var d=parseInt(c[u].getAttribute("id").replace(/\D/g,""));a.includes(d)||s.push(d),document.getElementById("box-".concat(d)).style.animation=""}return Object(r.a)(Object(r.a)({},e),{},{catsEscaped:s});case"CLEANUP":return Object(r.a)(Object(r.a)({},e),{},{popupPositions:[],missed:e.missed+e.catsEscaped.length,catsEscaped:[],catsTouched:[]});case"NEXT":return Object(r.a)(Object(r.a)({},e),{},{popupPositions:l(f)});case"GAME_FINISHED":return Object(r.a)(Object(r.a)({},e),{},{timeLimit:0,popupPositions:[1,2,3,4,5,6,7,8,9],catsEscaped:[],catsTouched:[],gameFinished:!0});case"RESTART":return O;default:throw new Error("Action undefined")}},E=function(){var e=d(),t=Object(n.useState)(!1),c=Object(o.a)(t,2),a=c[0],s=c[1],i=Object(n.useReducer)(v,O),r=Object(o.a)(i,2),u=r[0],l=r[1],m=Object(n.useState)(function(){var e=localStorage.getItem("boop-a-cat-high-score");return e?parseInt(e):0}()),h=Object(o.a)(m,2),p=h[0],E=h[1];Object(n.useEffect)((function(){window.addEventListener("storage",(function(){E(JSON.parse(localStorage.getItem("boop-a-cat-high-score")))})),u.score>p&&u.gameFinished&&(E(u.score),localStorage.setItem("boop-a-cat-high-score",u.score.toString()))}),[u.score,p,u.gameFinished]);var x=Object(n.useCallback)((function(){l({type:"CLEANUP"}),l({type:"GAME_FINISHED"});for(var e=document.getElementsByClassName("media"),t=0;t<e.length;t+=1)e[t].setAttribute("style","\n      background-color: gold;\n      border-radius: 100rem;\n    ")}),[]),T=function(e){l({type:"CAT_TOUCHED"});var t=e.target.id,c=document.getElementById(t),n=window.getComputedStyle(c).getPropertyValue("top");c.setAttribute("style","top: ".concat(n));var a=parseInt(t.replace(/\D/g,""));u.catsTouched.includes(a)||u.catsTouched.push(a)};return Object(n.useEffect)((function(){if(a){var e=setTimeout((function(){setTimeout((function(){l({type:"CAT_ESCAPED"})}),2500),l({type:"CLEANUP"}),l({type:"NEXT"})}),3e3);return u.gameFinished&&clearTimeout(e),function(){clearTimeout(e)}}})),Object(b.jsxs)(b.Fragment,{children:[Object(b.jsxs)("div",{className:"stats",children:[p>0?Object(b.jsxs)("h2",{className:"score",children:[" High Score: ",p]}):null,a&&Object(b.jsxs)("h2",{className:"score",children:[" Boop: ",u.score]}),!a&&Object(b.jsx)("button",{onClick:function(){s(!0)},className:"startButton",children:"Start"}),a&&u.timeLimit?Object(b.jsx)(g,{handleTimesUp:x,timeLimit:u.timeLimit}):null,u.gameFinished&&Object(b.jsxs)(b.Fragment,{children:[Object(b.jsx)("h2",{className:"timesup",children:"Time's up!"}),Object(b.jsx)("button",{onClick:function(){l({type:"RESTART"});for(var e=document.getElementsByClassName("media"),t=0;t<e.length;t+=1)e[t].setAttribute("style","\n    background-color: inherit;\n    border-radius: 0;\n  ")},className:"startButton",children:"restart"})]})]}),Object(b.jsx)("div",{className:"grid",style:e?{width:"40vw",height:"40vw"}:{width:"40vh",height:"40vh"},children:f.map((function(e){return Object(b.jsx)(j,{id:e,popup:u.popupPositions.includes(e),clicked:u.catsTouched,escaped:u.catsEscaped,handleClick:T,timesup:u.gameFinished},e)}))})]})};var x=function(){var e=window.navigator.language;return Object(b.jsxs)("div",{className:"App",children:["zh-TW"===e?Object(b.jsx)("h1",{className:"title",children:"\u4f86\u548c\u5c0f\u8c93\u73a9"}):Object(b.jsx)("h1",{className:"title",children:"Boop a Cat!"}),Object(b.jsx)(E,{}),Object(b.jsxs)("footer",{className:"footer",children:["by\xa0",Object(b.jsx)("a",{href:"https://debccheng.com",target:"_blank",rel:"noreferrer",children:"Deb"}),", with love."]})]})},T=function(e){e&&e instanceof Function&&c.e(3).then(c.bind(null,14)).then((function(t){var c=t.getCLS,n=t.getFID,a=t.getFCP,s=t.getLCP,i=t.getTTFB;c(e),n(e),a(e),s(e),i(e)}))};i.a.render(Object(b.jsx)(a.a.StrictMode,{children:Object(b.jsx)(x,{})}),document.getElementById("root")),T()}},[[13,1,2]]]);
//# sourceMappingURL=main.b52a3bb9.chunk.js.map