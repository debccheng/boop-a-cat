{"version":3,"sources":["helpers/getRandomInt.tsx","helpers/getPositions.tsx","helpers/useViewport.tsx","assets/cat.png","assets/cat_petted.png","assets/box.png","components/Cell.tsx","components/Timer.tsx","components/Game.tsx","App.tsx","reportWebVitals.ts","index.tsx"],"names":["getRandomInt","min","max","Math","floor","random","getPositions","totalPositions","positions","popupMax","length","position","includes","push","useViewport","useState","WidthMoreThanHeight","setWidthMoreThanHeight","useEffect","handleResize","window","innerWidth","innerHeight","addEventListener","removeEventListener","Cell","popup","id","clicked","escaped","handleClick","timesup","className","src","clickedCat","cat","alt","onClick","undefined","box","style","Timer","timeLimit","handleTimesUp","counter","setCounter","interval","setInterval","state","clearInterval","initialState","session","Date","popupPositions","score","missed","catsEscaped","catsTouched","reducer","action","type","cats","document","getElementsByClassName","touchedCats","touched","i","getAttribute","replace","parseInt","j","getElementById","animation","Error","Game","resize","useReducer","dispatch","gameFinished","setGameFinished","setHighScore","JSON","parse","localStorage","getItem","oldScore","getHighScore","highScore","useCallback","setItem","toString","elements","setAttribute","e","catID","target","catTouched","top","getComputedStyle","getPropertyValue","touchedNum","timer","setTimeout","clearTimeout","width","height","map","App","lang","navigator","language","reportWebVitals","onPerfEntry","Function","then","getCLS","getFID","getFCP","getLCP","getTTFB","ReactDOM","render","StrictMode"],"mappings":"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","file":"static/js/main.31a20737.chunk.js","sourcesContent":["const getRandomInt = (min: number, max: number): number => Math.floor(Math.random() * (max - min + 1)) + min;\n\nexport default getRandomInt;","\nimport getRandomInt from './getRandomInt';\n\nconst getPositions = (totalPositions: Array<number>): Array<number> => {\n  const positions: Array<number> = [];\n  const popupMax: number = getRandomInt(1, Math.floor(totalPositions.length/2));\n  while (positions.length < popupMax) {\n    const position: number = getRandomInt(1, 9)\n    if (positions.includes(position)) {\n      continue;\n    } else {\n      positions.push(position);\n    }\n  }\n  return positions;\n};\n\nexport default getPositions;\n","import {useState, useEffect} from 'react';\n\nconst useViewport = (): boolean => {\n  const [WidthMoreThanHeight, setWidthMoreThanHeight] = useState<boolean>(true);\n  useEffect(() => {\n    const handleResize = () => {\n      if (window.innerWidth >= window.innerHeight) {\n        setWidthMoreThanHeight(true);\n      } else {\n        setWidthMoreThanHeight(false);\n      }\n    }\n    window.addEventListener(\"resize\", handleResize);\n    handleResize();\n\n    return () => window.removeEventListener(\"resize\", handleResize);\n  }, []);\n\n  return WidthMoreThanHeight;\n}\n\nexport default useViewport;\n","export default __webpack_public_path__ + \"static/media/cat.e59a3b8a.png\";","export default __webpack_public_path__ + \"static/media/cat_petted.ed04e662.png\";","export default __webpack_public_path__ + \"static/media/box.fc12d1a3.png\";","import React from 'react';\nimport cat from '../assets/cat.png';\nimport clickedCat from '../assets/cat_petted.png';\nimport box from '../assets/box.png'\nimport { CellProps } from '../types/types';\n\nconst Cell: React.FC<CellProps> = ({ popup, id, clicked, escaped, handleClick, timesup }) => {\n  const animateBox = {\n    \"animation\": \"shake 0.4s linear both\"\n  };\n\n  return (\n    <>\n      <div className=\"cell\" id={`cell-${id}`}>\n        <div className=\"media\" >\n          {popup\n            ?\n            <>\n              <img\n                id={`cat-${id}`}\n                src={clicked.includes(id) ? clickedCat : cat}\n                alt=\"cat\"\n                className={\n                  `cat\n                  ${clicked.includes(id) ? 'catOut' : null}\n                  ${escaped.includes(id) && !timesup ? 'catEscape' : null}\n                `}\n                onClick={!clicked.includes(id) && !timesup ? handleClick : undefined}\n              />\n            </>\n            :\n            null\n          }\n          <img\n            id={`box-${id}`}\n            src={box}\n            alt=\"box\"\n            className=\"box\"\n            style={popup ? animateBox : undefined}\n          />\n        </div>\n      </div>\n    </>\n  );\n}\n\nexport default Cell;\n","import React, { useState, useEffect } from 'react'\nimport { TimerProps } from '../types/types';\n\nconst Timer: React.FC<TimerProps> = ({ timeLimit, handleTimesUp}) => {\n  const [counter, setCounter] = useState<number>(timeLimit);\n\n  useEffect(() => {\n    const countdown = () => {\n      if (counter >0) {\n        setCounter(state => state -1)\n      } else {\n        setCounter(0)\n        clearInterval(interval)\n        handleTimesUp();\n      }\n    }\n    const interval = setInterval(countdown, 1000);\n    return () => {\n      clearInterval(interval);\n    }\n  }, [counter, handleTimesUp, timeLimit])\n\n  return (\n    <h2 className=\"countdown\">\n      Time: {counter}\n    </h2>\n  );\n}\n\nexport default Timer;\n","import React, { useEffect, useReducer, useState, useCallback } from 'react';\nimport { InitState, Actions } from '../types/types';\nimport getPositions from '../helpers/getPositions';\nimport useViewport from '../helpers/useViewport';\nimport Cell from './Cell';\nimport Timer from './Timer';\n\n\nconst Game = () => {\n  const resize = useViewport();\n  const [state, dispatch] = useReducer<React.Reducer<InitState, Actions>>(reducer, initialState);\n  const [gameFinished, setGameFinished] = useState<boolean>(false);\n\n  const getHighScore = (): number => {\n    const oldScore: string | null = localStorage.getItem('boop-a-cat-high-score');\n    if (!oldScore) {\n      return 0;\n    } else {\n      return parseInt(oldScore);\n    }\n  }\n\n  useEffect(() => {\n    window.addEventListener('storage', () => {\n      setHighScore(JSON.parse(localStorage.getItem('boop-a-cat-high-score')!))\n    });\n  })\n\n  const [highScore, setHighScore] = useState<number>(getHighScore());\n\n  const handleTimesUp = useCallback(() => {\n    dispatch({ type: 'CLEANUP' });\n    setGameFinished(true);\n    dispatch({ type: 'GAME_FINISHED' });\n    if (state.score > highScore) {\n      setHighScore(state.score);\n      localStorage.setItem('boop-a-cat-high-score', state.score.toString());\n    }\n    const style = `\n      background-color: gold;\n      border-radius: 100rem;\n    `;\n    const elements = document.getElementsByClassName('media');\n    for (let i = 0; i < elements.length; i += 1) {\n      elements[i].setAttribute(\"style\", style);\n    }\n  }, [highScore, state.score]);\n\n  const handleRestart = () => {\n    dispatch({ type: 'RESTART' });\n    setGameFinished(false);\n    const style = `\n    background-color: inherit;\n    border-radius: 0;\n  `;\n    const elements = document.getElementsByClassName('media');\n    for (let i = 0; i < elements.length; i += 1) {\n      elements[i].setAttribute(\"style\", style);\n    }\n  }\n\n  const handleClick = (e: any) => {\n    dispatch({ type: 'CAT_TOUCHED' });\n    const catID = e.target.id;\n    const catTouched: HTMLElement = document.getElementById(catID)!;\n    const top: string = window.getComputedStyle(catTouched).getPropertyValue('top');\n    catTouched.setAttribute(\"style\", `top: ${top}`);\n    const touchedNum: number = parseInt(catID.replace(/\\D/g, ''));\n    if (!state.catsTouched.includes(touchedNum)) {\n      state.catsTouched.push(touchedNum);\n    }\n  }\n\n  // Game Loop\n  useEffect(() => {\n    const timer = setTimeout(() => {\n      setTimeout(() => {\n        dispatch({ type: 'CAT_ESCAPED' })\n      }, 2500);\n      dispatch({ type: 'CLEANUP' });\n      dispatch({ type: 'NEXT' });\n    }, 3000);\n\n    if (gameFinished) {\n      clearTimeout(timer);\n    }\n\n    return () => {\n      clearTimeout(timer);\n    };\n  });\n\n  return (\n    <>\n      <div className=\"stats\">\n        {highScore > 0 ? <h2 className=\"score\"> High Score: {highScore}</h2> : null}\n        <h2 className=\"score\"> Boop: {state.score}</h2>\n        {state.timeLimit ? <Timer handleTimesUp={handleTimesUp} timeLimit={state.timeLimit} /> : null}\n        {gameFinished && <h2 className=\"timesup\">Time's up!</h2>}\n        {gameFinished && <button onClick={handleRestart} className=\"restartButton\">restart</button>}\n      </div>\n      <div\n        className=\"grid\"\n        style={resize ? { width: '40vw', height: '40vw' } : { width: '40vh', height: '40vh' }}\n      >\n        {totalPositions.map((position) =>\n          <Cell\n            key={position}\n            id={position}\n            popup={state.popupPositions.includes(position)}\n            clicked={state.catsTouched}\n            escaped={state.catsEscaped}\n            handleClick={handleClick}\n            timesup={gameFinished}\n          />\n        )}\n      </div>\n    </>\n  );\n}\n\nconst totalPositions: Array<number> = [1, 2, 3, 4, 5, 6, 7, 8, 9];\n\nconst initialState: InitState = {\n  session: Date(),\n  popupPositions: [],\n  score: 0,\n  missed: 0,\n  timeLimit: 40,\n  catsEscaped: [],\n  catsTouched: [],\n};\n\nconst reducer: React.Reducer<InitState, Actions> = (state, action) => {\n  switch (action.type) {\n    case 'CAT_TOUCHED':\n      return {\n        ...state,\n        score: state.score + 1,\n      };\n\n    case 'CAT_ESCAPED':\n      const cats: HTMLCollection = document.getElementsByClassName('cat')\n      const touchedCats: HTMLCollection = document.getElementsByClassName('catOut');\n      const touched: Array<number> = [];\n      const escaped: Array<number> = [];\n      for (let i = 0; i < touchedCats.length; i += 1) {\n        const id: string = touchedCats[i].getAttribute(\"id\")!.replace(/\\D/g, '');\n        touched.push(parseInt(id));\n      }\n      for (let j = 0; j < cats.length; j += 1) {\n        const id: number = parseInt(cats[j].getAttribute(\"id\")!.replace(/\\D/g, ''));\n        if (!touched.includes(id)) {\n          escaped.push(id);\n        }\n        document.getElementById(`box-${id}`)!.style.animation = '';\n      }\n      return {\n        ...state,\n        catsEscaped: escaped,\n      };\n\n    case 'CLEANUP':\n      return {\n        ...state,\n        popupPositions: [],\n        missed: state.missed + state.catsEscaped.length,\n        catsEscaped: [],\n        catsTouched: [],\n      }\n\n    case 'NEXT':\n      return {\n        ...state,\n        popupPositions: getPositions(totalPositions),\n      };\n\n    case 'GAME_FINISHED':\n      return {\n        ...state,\n        timeLimit: 0,\n        popupPositions: [1, 2, 3, 4, 5, 6, 7, 8, 9],\n        catsEscaped: [],\n        catsTouched: [],\n      }\n\n    case 'RESTART':\n      return initialState;\n\n    default:\n      throw new Error('Action undefined');\n  }\n}\n\nexport default Game;\n","import React from 'react';\nimport './App.css';\nimport Game from './components/Game';\n\nfunction App() {\n  const lang: string = window.navigator.language;\n\n  return (\n    <div className=\"App\">\n      {lang === \"zh-TW\" ? <h1 className=\"title\">來和小貓玩</h1>:<h1 className=\"title\">Boop a Cat!</h1> }\n      <Game />\n    </div>\n  );\n}\n\nexport default App;\n","import { ReportHandler } from 'web-vitals';\n\nconst reportWebVitals = (onPerfEntry?: ReportHandler) => {\n  if (onPerfEntry && onPerfEntry instanceof Function) {\n    import('web-vitals').then(({ getCLS, getFID, getFCP, getLCP, getTTFB }) => {\n      getCLS(onPerfEntry);\n      getFID(onPerfEntry);\n      getFCP(onPerfEntry);\n      getLCP(onPerfEntry);\n      getTTFB(onPerfEntry);\n    });\n  }\n};\n\nexport default reportWebVitals;\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport App from './App';\nimport reportWebVitals from './reportWebVitals';\n\nReactDOM.render(\n  <React.StrictMode>\n    <App />\n  </React.StrictMode>,\n  document.getElementById('root')\n);\n\n// If you want to start measuring performance in your app, pass a function\n// to log results (for example: reportWebVitals(console.log))\n// or send to an analytics endpoint. Learn more: https://bit.ly/CRA-vitals\nreportWebVitals();\n"],"sourceRoot":""}